datasource db {
    provider = "postgresql"
    url = env("DATABASE_URL")
}
generator client {
  provider = "prisma-client-js"
  output   = "generated/prisma"
}


model User {
    id Int @id @default(autoincrement())
    discord_id String @unique
    streak_count Int @default(0)
    streak_start DateTime?
    last_streak_end DateTime?
    created_at DateTime @default(now())
    updated_at DateTime?
    checkins Checkin[]
}

model Checkin {
    id Int @id @default(autoincrement())
    user_id Int
    description String
    created_at DateTime @default(now())
    updated_at DateTime?
    user User @relation(fields: [user_id], references: [id])

    @@index([user_id, created_at(sort: Desc)])
}

model Attachment {
  id Int @id @default(autoincrement())
  name String @default("")
  url String @default("")
  type String @default("")
  size Int @default(0)
  created_at DateTime @default(now())
  module_id Int
  module_type AttachmentModuleType

  @@index([module_id, module_type, created_at(sort: Desc)])
}

enum AttachmentModuleType {
  CHECKIN
}